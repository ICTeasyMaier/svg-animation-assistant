function count(x){return x.length}function doall(x){return x}function mapIndexed(f,a){return a.map(function(l,i){return f(i,l)})}function isEqual(a,b){return a==b}function partial(fn){var slice=Array.prototype.slice;var stored_args=slice.call(arguments,1);return function(){var new_args=slice.call(arguments);var args=stored_args.concat(new_args);return fn.apply(null,args)}}exports={};setTimeout(function(){animate()},0);{var _ns_={id:"inkscape-animation-assistant.animation",doc:void 0}}var inkscapeLabelRe=exports.inkscapeLabelRe=/\((\d+)\)/;var illustratorLabelRe=exports.illustratorLabelRe=/_x28_(\d+)_x29_/;var layerGetDelay=exports.layerGetDelay=function layerGetDelay(layer){return function(){var defaultø1=100;return layer?function(){var labelø1=layer.getAttribute("inkscape:label")||layer.getAttribute("id");var delayparameterInkscapeø1=labelø1?labelø1.match(inkscapeLabelRe):void 0;var delayparameterIllustratorø1=labelø1?labelø1.match(illustratorLabelRe):void 0;var delayparameterø1=delayparameterInkscapeø1||delayparameterIllustratorø1;return delayparameterø1?parseInt(delayparameterø1[1]):defaultø1}.call(this):defaultø1}.call(this)};var layerIsStatic=exports.layerIsStatic=function layerIsStatic(layer){return layer?!isEqual((layer.getAttribute("inkscape:label")||layer.getAttribute("id")||"").indexOf("tatic"),-1):void 0};var layersGetAll=exports.layersGetAll=function layersGetAll(){return Array.from(document.querySelectorAll("#animation svg > g"))};var flipLayers=exports.flipLayers=function flipLayers(cb,layers){return doall(mapIndexed(function(i,l){return l.style["display"]=cb(i,l)?"":"none"},layers))};var animate=exports.animate=function animate(isFnIsPlaying,frame){return function(){var isFnIsPlayingø2=isFnIsPlaying||function(){return true};var layersø1=layersGetAll();var lengthø1=count(layersø1);var currentFrameø1=(frame||0)%lengthø1;var layerø1=layersø1[currentFrameø1||0];var frameTimeø1=layerGetDelay(layerø1);var staticø1=layerIsStatic(layerø1);return isFnIsPlayingø2()?function(){!staticø1||!frame?flipLayers(function(i,l){return isEqual(i,currentFrameø1)||layerIsStatic(l)},layersø1):void 0;return setTimeout(partial(animate,isFnIsPlayingø2,currentFrameø1+1),frameTimeø1)}():void 0}.call(this)};
